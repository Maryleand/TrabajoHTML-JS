<!DOCTYPE html>
<html lang="Es">
    <head>
        <meta charset="UTF-8">
        <title>Drivion</title>
        <link rel="stylesheet" type="text/css" href="../css/estilos.css">
        <link rel="stylesheet" href="https://unpkg.com/leaflet@1.5.1/dist/leaflet.css" integrity="sha512-xwE/Az9zrjBIphAcBb3F6JVqxf46+CDLwfLMHloNu6KEQCAWi6HcDUbeOfBIptF7tcCzusKFjFw2yuvEpDL9wQ==" crossorigin=""> 
        <link rel="stylesheet" href="../librerias/leaflet-routing-machine-3.2.12/leaflet-routing-machine-3.2.12/dist/leaflet-routing-machine.css"> 
    </head>
    <body>
        <header>
            <!--Div banner con logo-->
            <div style="background-image: url(../images/banner.jpg);" id="bannerlogo">
            <img src="../images/Logocoche.png" alt="logotipo" id="imgbannerlogo">
            </div>
            <!-- Div que contiene el menú -->
            <div id="menu">
                <a href="#" id="namepag">Drivion</a>
                <span class="boton"><a href="../index.html" class="textboton">Inicio</a></span>
                <span class="boton"><a href="galeria.html" class="textboton">Galeria</a></span>
                <span class="boton"><a href="presupuesto.html" class="textboton">Presupuesto</a></span>
                <span class="boton"><a href="#" class="textboton" id="pagactual">Contacto</a></span>
            </div>
        </header>
        <section class="sections" id="inicio">
            <h1>Nuestros datos: </h1>
            <div id="divContacto">
                <div id="divTablaC">
                    <table>
                        <tr><th colspan="2"><br></th></tr>
                        <tr>
                            <td><img src="../images/viber.png" alt="telefono" width="30" height="30"></td>
                            <td>Teléfono: 555 55 55 55 5</td>
                        </tr>
                        <tr>
                            <td><img src="../images/correo-electronico.png" alt="carta" width="30" height="30"></td>
                            <td>Email: Drivion@correo.com</td>
                        </tr>
                        <tr>
                            <td colspan="2"><br>Nos encontramos en:</td>
                        </tr>
                        <tr>
                            <td colspan="2"><br>Calle Compositor Lehmberg Ruiz, 5, <br>Distrito Centro, 29007 Málaga</td>
                        </tr>
                        <tr>
                            <td colspan="2"><br>Horario de Apertura:<br>Lunes a Domingo: 10:00 AM - 10:00 PM</td>
                        </tr>
                    </table>
                </div>
                <div>
                    <img src="../images/pexels-davidmcbee-395537.jpg" alt="concesionario de coches" id="imgContacto">
                </div>
            </div>
        </section>
        <section class="sections">
            <div class="textBorderinset"><h2>Ven a visitarnos</h2></div>
            <div id="Mapa"></div>
        </section>
        <footer class="footer">
            <p>
                Calle Compositor │ Lehmberg Ruiz, 5, Distrito Centro │ Málaga │ 29007 │ España
            </p>
            <p>
                Drivion S.L. • Todos los derechos reservados • Aviso legal • Politica de privacidad • Politica de cookies
            </p>
            <nav id="redessociales">
                <!--Los enlaces y las imagenes se encuentran juntos ya que al indentarlos provoca un error visual-->
                <a href="https://www.youtube.com"><img src="../images/youtube.png" alt="logo de youtube"></a>
                <a href="https://www.facebook.com"><img src="../images/facebook.png" alt="logo de facebook"></a>
                <a href="https://www.instagram.com"><img src="../images/instagram.png" alt="logo de instagram"></a>
            </nav>
        </footer>
        <script src="../js/scripts.js"></script>
        <script src="https://unpkg.com/leaflet@1.5.1/dist/leaflet.js" integrity="sha512-GffPMF3RvMeYyc1LWMHtK8EbPv0iNZ8/oTtHPx9/cc2ILxQ+u905qIwdpULaqDkyBKgOaB57QTMg7ztg8Jm2Og==" crossorigin=""></script>
        <script src="../librerias/leaflet-routing-machine-3.2.12/leaflet-routing-machine-3.2.12/dist/leaflet-routing-machine.js"></script>

        <script>
            // Centra el mapa en el centro de Málaga
            var mimapa = L.map("Mapa").setView([36.7213, -4.4214], 15);  // Zoom 15 para ruta detallada local
            // Capa de tiles de OpenStreetMap (con HTTPS para evitar warnings)
            L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png", {
                maxZoom: 18, 
                attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a>'
            }).addTo(mimapa); 
           // Evento de clic para mostrar posición (opcional, puedes quitarlo)
            mimapa.on("click", function(e) {
                var pixelPosition = e.layerPoint;
                var latLng = mimapa.layerPointToLatLng(pixelPosition);
                alert("Position = " + pixelPosition + "\n LatLng = " + latLng); 
                });
            // Control de ruta: Usando coordenadas fijas para evitar problemas de geocoding
            // Configuración explícita del router con OSRM para estabilidad
            L.Routing.control({
                waypoints: [
                    L.latLng(36.7213, -4.4214),  // Inicio: Centro de Málaga (Plaza de la Constitución)
                    L.latLng(36.7215, -4.4198)   // Destino: Calle Compositor Lehmberg Ruiz, 5 (coordenadas exactas)
                ],
                // Opcional: Personaliza para no mostrar instrucciones detalladas si no las quieres
                show: true,  // Oculta el panel de instrucciones (solo ruta en mapa)
                addWaypoints: false  // Evita agregar waypoints extras al clic
            }).addTo(mimapa);
        </script>
    </body>
</html>